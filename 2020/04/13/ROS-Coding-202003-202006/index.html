<!DOCTYPE html>
<html lang="en">





<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/icon.jpg">
  <link rel="icon" type="image/png" href="/img/icon.jpg">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="description" content="">
  <meta name="author" content="John Doe">
  <meta name="keywords" content="">
  <title>ROS Coding 202003-202006 ~ Hexo</title>

  <link rel="stylesheet" href="/lib/font-awesome/css/all.min.css"  >
<link rel="stylesheet" href="/lib/bootstrap/css/bootstrap.min.css"  >
<link rel="stylesheet" href="/lib/mdbootstrap/css/mdb.min.css"  >
<link rel="stylesheet" href="/lib/github-markdown/github-markdown.min.css"  >

<link rel="stylesheet" href="//at.alicdn.com/t/font_1067060_qzomjdt8bmp.css">



  <link rel="stylesheet" href="/lib/prettify/tomorrow-night-eighties.min.css"  >

<link rel="stylesheet" href="/css/main.css"  >


  <link rel="stylesheet" href="/lib/fancybox/jquery.fancybox.min.css"  >


<meta name="generator" content="Hexo 4.2.0"></head>


<body>
  <header style="height: 50vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand"
       href="/">&nbsp;<strong>Jay Lu</strong>&nbsp;</a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
          <li class="nav-item">
            <a class="nav-link" href="/">Home</a>
          </li>
        
          
          
          
          
          <li class="nav-item">
            <a class="nav-link" href="/archives/">Archives</a>
          </li>
        
          
          
          
          
          <li class="nav-item">
            <a class="nav-link" href="/categories/">Categories</a>
          </li>
        
          
          
          
          
          <li class="nav-item">
            <a class="nav-link" href="/tags/">Tags</a>
          </li>
        
          
          
          
          
          <li class="nav-item">
            <a class="nav-link" href="/about/">About</a>
          </li>
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" data-toggle="modal" data-target="#modalSearch">&nbsp;&nbsp;<i
                class="iconfont icon-search"></i>&nbsp;&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="view intro-2" id="background" false
         style="background: url('/img/pp.jpg')no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask rgba-black-light flex-center">
          <div class="container text-center white-text fadeInUp">
            <span class="h2" id="subtitle">
              
            </span>

            
              <br>
              
                <p class="mt-3">
                  <i class="fas fa-calendar-alt" aria-hidden="true"></i>&nbsp;
                  Monday, April 13th 2020, 12:41 pm
                </p>
              

              <p>
                
                  
                  &nbsp;<i class="far fa-chart-bar"></i>
                  <span class="post-count">
                    4.4k 字
                  </span>&nbsp;
                

                
                  
                  &nbsp;<i class="far fa-clock"></i>
                  <span class="post-count">
                      22 分钟
                  </span>&nbsp;
                

                
                  <!-- 不蒜子统计文章PV -->
                  
                  &nbsp;<i class="far fa-eye" aria-hidden="true"></i>&nbsp;
                  <span id="busuanzi_container_page_pv">
                    <span id="busuanzi_value_page_pv"></span> 次
                  </span>&nbsp;
                
              </p>
            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid">
  <div class="row">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-md">
      <div class="py-5 z-depth-3" id="board">
        <div class="post-content mx-auto" id="post">
          <div class="markdown-body">
            <h1 id="0-Basic-information"><a href="#0-Basic-information" class="headerlink" title="0  Basic information"></a>0  Basic information</h1><ul>
<li><p>Environment   </p>
<blockquote>
<p>ROS version: ros-melodic-desktop-full<br>OS：Ubuntu 18.04</p>
</blockquote>
</li>
<li><p>Useful website</p>
<blockquote>
<p>ROS wiki : <a href="http://wiki.ros.org/cn/ROS/Tutorials" target="_blank" rel="noopener">http://wiki.ros.org/cn/ROS/Tutorials</a> </p>
</blockquote>
</li>
<li><p>ROS cheat sheet备忘单:<br>Kinetic: <a href="https://w3.cs.jmu.edu/spragunr/CS354_S19/handouts/ROSCheatsheet.pdf" target="_blank" rel="noopener">https://w3.cs.jmu.edu/spragunr/CS354_S19/handouts/ROSCheatsheet.pdf</a><br>MELODIC: <a href="https://clearpathrobotics.com/ros-robot-operating-system-cheat-sheet/" target="_blank" rel="noopener">https://clearpathrobotics.com/ros-robot-operating-system-cheat-sheet/</a></p>
</li>
</ul>
<h1 id="I-ROS-结构"><a href="#I-ROS-结构" class="headerlink" title="I ROS 结构"></a>I ROS 结构</h1><h2 id="1-节点"><a href="#1-节点" class="headerlink" title="1. 节点"></a>1. 节点</h2><p>1). 节点(node) — 执行单元  </p>
<ul>
<li>可分布可使用不同语言命名必须唯一</li>
</ul>
<p>2). 节点管理器(ROS mater)— 控制中心</p>
<ul>
<li>节点注册服务 | 跟踪topic 和 service 通讯记录 | 全局参数服务器(见3))</li>
</ul>
<p>3). 参数(Parameter) — 全局共享字典</p>
<ul>
<li>可通过网络访问的共享,多变量字典.</li>
<li>节点可利用此来存储检索参数.</li>
<li>适用于存储静态,非二进制的配置参数,不适宜存储动态配置参数.</li>
</ul>
<h2 id="2-节点间的数据传输方式"><a href="#2-节点间的数据传输方式" class="headerlink" title="2.  节点间的数据传输方式"></a>2.  节点间的数据传输方式</h2><p>1). 异步通信机制   <strong>话题(Topic)</strong>    </p>
<ul>
<li>消息(<strong>message</strong>): .msg文件,编译过程中生成对应的代码文件.</li>
<li><strong>Publisher</strong>: 消息发布的节点</li>
<li><strong>Subscriber</strong>:订阅某一节点发布消息的节点,  同一话题的subscriber和publisher 可以不同.</li>
<li><p>多对多,适用于数据传输,单向传输.</p>
<p>2). 同步通信机制   <strong>服务(Service)</strong>    </p>
<ul>
<li>客户端/服务器(Client/Server)模型,Client node 发布request, server实时返回response, 强实时性.</li>
<li>.srv文件,编译过程中生成对应的代码文件.</li>
<li>1(server)对多,适用于逻辑处理.</li>
</ul>
</li>
</ul>
<h2 id="3-文件系统"><a href="#3-文件系统" class="headerlink" title="3. 文件系统"></a>3. 文件系统</h2><ul>
<li>功能包(<strong>Package</strong>): ros中的基本单元<blockquote>
<p>包含节点源码\配置文件\消息,服务类型\数据类型等.<br>功能包清单(<strong>Package manifest</strong>):记录功能包的基本信息,包含作者信息\许可\依赖等.</p>
</blockquote>
</li>
<li>元功能包(<strong>Meta Packages</strong>): 包含多个用于同一目的的功能包.<blockquote>
<p>功能包—&gt; 元功能包(功能包1,功能包2,…) —&gt;软件仓库(元功能包1,元功能包2,…) —&gt; ros 社区(仓库1,仓库2,…).</p>
</blockquote>
</li>
</ul>
<h1 id="II-ROS-命令"><a href="#II-ROS-命令" class="headerlink" title="II ROS 命令"></a>II ROS 命令</h1><p>ROS cheat sheet备忘单:<br>Kinetic: <a href="https://w3.cs.jmu.edu/spragunr/CS354_S19/handouts/ROSCheatsheet.pdf" target="_blank" rel="noopener">https://w3.cs.jmu.edu/spragunr/CS354_S19/handouts/ROSCheatsheet.pdf</a><br>MELODIC: <a href="https://clearpathrobotics.com/ros-robot-operating-system-cheat-sheet/" target="_blank" rel="noopener">https://clearpathrobotics.com/ros-robot-operating-system-cheat-sheet/</a></p>
<h2 id="1-Change-directory-in-the-ROS-file-system"><a href="#1-Change-directory-in-the-ROS-file-system" class="headerlink" title="1. Change directory in the ROS file system"></a>1. Change directory in the ROS file system</h2><p>roscd [package_name[/subdir]]   </p>
<blockquote>
<p> roscd roscpp &amp;&amp; pwd      /opt/ros/kinetic/share/roscpp<br> roscd roscpp                     /srv/opt/ros/kinetic/share/roscpp/srv<br> roscd robby_roboto          ~/catkin_ws/src/robby_roboto  </p>
</blockquote>
<h2 id="2-Getting-information-about-installed-packages"><a href="#2-Getting-information-about-installed-packages" class="headerlink" title="2. Getting information about installed packages"></a>2. Getting information about installed packages</h2><p>rospack <subcommand> [options] [package]<br>subcommands (among the others)     </p>
<blockquote>
<p>depends [package] package dependencies<br>find [package]           find package directory<br>list                                  list available packages<br>profile                          scan all workspace and index packages<br>Example<br>rospack find roscpp             /opt/ros/kinetic/share/roscpp<br>rospack list<several packages><br>rospack list | grep turtle  </p>
</blockquote>
<h2 id="3-To-start-the-ROS-middleware-just-type-in-a-terminal"><a href="#3-To-start-the-ROS-middleware-just-type-in-a-terminal" class="headerlink" title="3. To start the ROS middleware just type in a terminal"></a>3. To start the ROS middleware just type in a terminal</h2><p>roscore   进入ros 环境<br>Now it is possible to display information about the   elements currently running     </p>
<blockquote>
<p>rosnode list<br>rostopic list<br>rostopic echo /rosout<br>rosservice list<br>rqt_graph   node图形界面</p>
<ul>
<li>rostopic 和 rosnode 什么关系</li>
</ul>
</blockquote>
<h2 id="4-Getting-information-about-running-nodes"><a href="#4-Getting-information-about-running-nodes" class="headerlink" title="4. Getting information about running nodes"></a>4. Getting information about running nodes</h2><p>   rosnode <command> [other_commands]<br>   subcommands (among the others) </p>
<blockquote>
<p>ping     test connectivity to node<br>info     print information about node<br>kill       kill a running node<br>cleanup       purge registration information of unreachable nodes<br>rosnode list<br>rosnode info /rosout  </p>
</blockquote>
<h2 id="5-To-start-a-ROS-node-type-in-a-terminal"><a href="#5-To-start-a-ROS-node-type-in-a-terminal" class="headerlink" title="5.  To start a ROS node type in a terminal"></a>5.  To start a ROS node type in a terminal</h2><p>  rosrun [package_name] [node_name]    </p>
<blockquote>
<p>rosrun turtlesim turtlesim_node<br>rosnode ping /turtlesim<br>rosnode info /turtlesim<br>rosrun turtlesim turtle_teleop_key      //可以视作run一个实时控制的node</p>
<blockquote>
<p>turtle_teleop_key is publishing the key strokes on a topic<br>turtlesim subscribes to the same topic to receive the key strokes    </p>
</blockquote>
</blockquote>
<h2 id="6-DEALING-WITH-TOPICS-To-show-the-running-node-type-in-a-terminal"><a href="#6-DEALING-WITH-TOPICS-To-show-the-running-node-type-in-a-terminal" class="headerlink" title="6. DEALING WITH TOPICS - To show the running node type in a terminal"></a>6. DEALING WITH TOPICS - To show the running node type in a terminal</h2><p>rostopic echo /turtle1/cmdele    </p>
<blockquote>
<p>打印实时坐标<br>rostopic info /turtle1/pose<br>rostopic type /turtle1/pose  </p>
</blockquote>
<p>rqt_graph<br>To plot published data on a topic     </p>
<blockquote>
<p>rqt_plot /turtle1/pose/x /turtle1/pose/y<br>rqt_plot /turtle1/pose/x:y<br>To monitor a topic on a terminal type rostopic echo /turtle1/cmd_vel</p>
</blockquote>
<h2 id="7-DEALING-WITH-TOPICS-CONT-Getting-information-about-ROS-topics"><a href="#7-DEALING-WITH-TOPICS-CONT-Getting-information-about-ROS-topics" class="headerlink" title="7. DEALING WITH TOPICS CONT. - Getting information about ROS topics"></a>7. DEALING WITH TOPICS CONT. - Getting information about ROS topics</h2><p>rostopic <command> [topic_name]   subcommands (among the others)    </p>
<blockquote>
<p>echo            print messages to screen<br>find              find topics by type<br>hz                 display publishing rate of topic<br>info              print information about active topic<br>list                list active topics<br>pub              publish data to topic   </p>
<blockquote>
<p>rostopic pub [topic] [msg type] [args]<br>e.g.1 rostopic pub my_topic std_msgs/String “hello there”<br>e.g.2 rostopic pub -r 10 /turtle1/cmd_vel geometry_msgs/Twist ‘{linear: {x: 2.0, y: 0.0, z: 0.0}, angular: {x: 0.0,y: 0.0,z: 0.0}}’<br>e.g.3 rostopic pub -1 /turtle1/cmd_vel geometry_msgs/Twist — ‘[2.0, 0.0, 0.0]’ ‘[0.0, 0.0, 1.8]’<br>The -1 option force rostopic to publish the message only once, if you want to publish the message at a specific frequency you will use:<br>e.g.4  rostopic pub /turtle1/cmd_vel geometry_msgs/Twist -r 1 — ‘[2.0, 0.0, 0.0]’ ‘[0.0, 0.0, 1.8]’<br>Where the -r 1 option specify that the message will be published at 1hz frequency<br>type            print topic type<br>rostopic type [topic_name]   |    rostopic type /turtle1/cmd_vel </p>
</blockquote>
</blockquote>
<h2 id="7-MESSAGES-ALSO-SERVICES-Getting-information-about-msg-srv-files"><a href="#7-MESSAGES-ALSO-SERVICES-Getting-information-about-msg-srv-files" class="headerlink" title="7. MESSAGES (ALSO SERVICES) Getting information about msg/srv files"></a>7. MESSAGES (ALSO SERVICES) Getting information about msg/srv files</h2><p>rosmsg <command> [msg/srv_file]<br>subcommands (among the others)   []内可以为/clear 代表为空</p>
<blockquote>
<p>show    Display the fields in the msg/srv.    //rosmsg show Pose<br>list         Display names of all msg/srv.       //rosmsg list |grep turtle<br>package       List all the msg/srv in a package.    //rosmsg package nav_msgs<br>packages     List all packages containing the msg/srv.<br>rosmsg show Pose<br>rosmsg package nav_msgs</p>
</blockquote>
<h2 id="8-DEALING-WITH-SERVICES-Calling-services-from-command-line-and-getting-information"><a href="#8-DEALING-WITH-SERVICES-Calling-services-from-command-line-and-getting-information" class="headerlink" title="8. DEALING WITH SERVICES -  Calling services from command line and getting information:"></a>8. DEALING WITH SERVICES -  Calling services from command line and getting information:</h2><p>rosservice <command> [other_commands]<br>subcommand (among the others)  </p>
<blockquote>
<p>list                     Print information about active services.<br>node                Print name of node providing a service.<br>call                   Call the service with the given args.<br>args                 List the arguments of a service.<br>type                 Print the service type.<br>find                  Find services by service type<br>rosservice call /reset<br>rosservice type /reset  </p>
<p>e.g.<br>rosservice call /spawn 10 10 0 t2<br>rostopic list<br>rosbag record /turtle1/pose<br>rosbag info 2020-04-09-15-42-33.bag<br>rosbag play -r 1 2020-04-09-15-42-33.bag   </p>
</blockquote>
<h2 id="9-BAGS-bag-file-format-to-store-messages-data"><a href="#9-BAGS-bag-file-format-to-store-messages-data" class="headerlink" title="9. BAGS bag: file format to store messages data"></a>9. BAGS bag: file format to store messages data</h2><p>Used to test different algorithm with the exact same input and to debug a system when it’s not monitorable at runtime<br>To record a bag use:   </p>
<blockquote>
<p>rosbag record   </p>
</blockquote>
<p>to record all the topics use:    </p>
<blockquote>
<p>rosbag record -a   </p>
</blockquote>
<p>to record only a subset of the topic use:   </p>
<blockquote>
<p>rosbag record topic1 topic2 etc</p>
</blockquote>
<p>To get info regarding a beg use the command:   </p>
<blockquote>
<p>rosbag info bag_name   </p>
</blockquote>
<p>To play a bag run: </p>
<blockquote>
<p>rosbag play bag_name </p>
</blockquote>
<p>remember that to run rosbag you need an active ros session (roscore should be on)<br>Always monitor your bag size, sometimes logging all the topics (if you are working with cameras) is not the best idea because you will produce more data/sec than your max disk writing speed. </p>
<h1 id="III-CREATING-THE-WORKSPACE"><a href="#III-CREATING-THE-WORKSPACE" class="headerlink" title="III CREATING THE WORKSPACE"></a>III CREATING THE WORKSPACE</h1><h2 id="1-Workspace-structure"><a href="#1-Workspace-structure" class="headerlink" title="1.  Workspace structure"></a>1.  Workspace structure</h2><p>存放工程开发相关文件的文件夹  </p>
<p>   1).  <strong>代码空间Source space</strong> (/src):   </p>
<ul>
<li>contains the source code of catkin packages.   </li>
<li><p>Subfolder of this are the ROS packages you want to add to your system    </p>
<p>2). <strong>编译空间Build space</strong> (/build):  </p>
</li>
<li>space where cmake is invoked to build the catkin packages   </li>
<li><p>cmake and catkin keep their cache information and other intermediate files here        </p>
<p>3). <strong>开发空间Devel space</strong> (/devel):   </p>
<ul>
<li>Space where built targets are placed prior to being installed   </li>
</ul>
<p>4). <strong>安装空间install space</strong> (/install):   </p>
</li>
<li>开发完成后,交付第三方安装使用</li>
</ul>
<h2 id="2-Comands"><a href="#2-Comands" class="headerlink" title="2. Comands"></a>2. Comands</h2><p>ROS uses a custom compiling environment called Catkin<br>cmake/make with specific flags<br>Requires a workspace with a specific structure Easy to setup and “easy” to use</p>
<blockquote>
<p>mkdir -p ~/robotics/src<br>cd ~/robotics/<br>catkin_make<br>echo “source ~/robotics/devel/setup.bash” &gt;&gt; ~/.bashrc<br>source ~/.bashrc</p>
</blockquote>
<h3 id="2-1-Workspace-工作空间"><a href="#2-1-Workspace-工作空间" class="headerlink" title="2.1 Workspace-工作空间"></a>2.1 Workspace-工作空间</h3><p>创建工作空间</p>
<blockquote>
<p>mkdir -p ~/ros21test_ws/src<br>cd ~/ros21test_ws/src/<br>catkin_init_workspace</p>
</blockquote>
<p>编译工作空间</p>
<blockquote>
<p>cd  ~/ros21test_ws/<br>catkin_make </p>
</blockquote>
<p>环境变量操作</p>
<blockquote>
<p>source devel/setup.bash        //设置<br>echo $ROS_PACKAGE_PATH   //检查  </p>
</blockquote>
<p>以下方法添加环境变量则一劳永逸 </p>
<blockquote>
<p>echo “source ~/ros21test_ws/devel/setup.bash” &gt;&gt; ~/.bashrc<br>source ~/.bashrc</p>
</blockquote>
<p>可选: 编译产生install空间  </p>
<blockquote>
<p>catkin_make install</p>
</blockquote>
<h3 id="2-2-Packages-功能包"><a href="#2-2-Packages-功能包" class="headerlink" title="2.2 Packages-功能包"></a>2.2 Packages-功能包</h3><p>catkin_create_pkg <pack_name> [depend1][depend2][depend3]<br>创建功能包</p>
<blockquote>
<p>cd  ~/ros21test_ws/src<br>catkin_create_pkg test1_pkgname std_msgs rospy roscpp  </p>
<p>创建后会出现2个文件夹和2个文件:  </p>
<blockquote>
<p><strong>include</strong>  <strong>src</strong>   CMakeLists.txt    package.xml    </p>
<ul>
<li>include : 放src中代码的头文件, 例如.hpp</li>
<li>src中放代码文件, 例如.cpp,.py</li>
<li>CMakeLists.txt  基于gcc描述编译规则,用于编译.</li>
<li>package.xml     功能包清单Package manifest. <strong>特别是包含了依赖信息,如果后面发现还需要依赖其他包,可以在package.xml和CMakeLists.txt中手动添加.</strong></li>
</ul>
</blockquote>
</blockquote>
<p>编译功能包  //workspace 创建时一般已经设置, 但是还要重新添加吗???</p>
<blockquote>
<p>cd  ~/ros21test_ws/<br>catkin_make<br>source~/ros21test_ws/devel/setup.bash   //设置</p>
</blockquote>
<p>以下方法添加环境变量则一劳永逸 </p>
<blockquote>
<p>echo “source ~/ros21test_ws/devel/setup.bash” &gt;&gt; ~/.bashrc<br>source ~/.bashrc</p>
</blockquote>
<h3 id="2-3-cpp代码结构"><a href="#2-3-cpp代码结构" class="headerlink" title="2.3 cpp代码结构"></a>2.3 cpp代码结构</h3><h1 id="include"><a href="#include" class="headerlink" title="include "></a>include <ros/ros.h></h1><h1 id="include-1"><a href="#include-1" class="headerlink" title="include "></a>include <geometry_msgs/Twist.h></h1><p>int main(int argc, char **argv)<br>{</p>
<pre><code>ros::init(argc, argv, &quot;pub&quot;);      // ROS节点初始化
ros::NodeHandle n;    // 创建节点句柄, 可能和命名空间有关

// 创建一个Publisher，发布名为/turtle1/cmd_vel的topic，消息类型为geometry_msgs::Twist，队列长度10
ros::Publisher turtle_vel_pub = n.advertise&lt;geometry_msgs::Twist&gt;(&quot;/turtle1/cmd_vel&quot;, 10);

// 设置循环的频率
ros::Rate loop_rate(10);

int count = 0;
while (ros::ok())
{
    // 初始化geometry_msgs::Twist类型的消息
    geometry_msgs::Twist vel_msg;
    vel_msg.linear.x = 0.5;
    vel_msg.angular.z = 0.2;

    // 发布消息
    turtle_vel_pub.publish(vel_msg);
    ROS_INFO(&quot;Publsh turtle velocity command[%0.2f m/s, %0.2f rad/s]&quot;, 
            vel_msg.linear.x, vel_msg.angular.z);

    // 按照循环频率延时
    loop_rate.sleep();
}

return 0;
</code></pre><p>}</p>
<h3 id="2-4-Publisher-Packages-发布功能包创建示例"><a href="#2-4-Publisher-Packages-发布功能包创建示例" class="headerlink" title="2.4 Publisher-Packages-发布功能包创建示例"></a>2.4 Publisher-Packages-发布功能包创建示例</h3><blockquote>
<p>rm -r  ~/ros21test_ws/src/test1_pkgname<br>cd ~/ros21test_ws/src<br>catkin_create_pkg  learning_topic  roscpp  rospy std_msgs  geometry_msgs turtlesim  </p>
</blockquote>
<p>代码示例<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ros/ros.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;geometry_msgs/Twist.h&gt;  </span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> **argv)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// ROS节点初始化</span></span><br><span class="line">	ros::init(argc, argv, <span class="string">"velocity_publisher"</span>);</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 创建节点句柄</span></span><br><span class="line">	ros::NodeHandle n;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 创建一个Publisher，发布名为/turtle1/cmd_vel的topic，消息类型为geometry_msgs::Twist，队列长度10</span></span><br><span class="line">	ros::Publisher turtle_vel_pub = n.advertise&lt;geometry_msgs::Twist&gt;(<span class="string">"/turtle1/cmd_vel"</span>, <span class="number">10</span>);</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 设置循环的频率</span></span><br><span class="line">	<span class="function">ros::Rate <span class="title">loop_rate</span><span class="params">(<span class="number">10</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">while</span> (ros::ok())</span><br><span class="line">	&#123;</span><br><span class="line">	    <span class="comment">// 初始化geometry_msgs::Twist类型的消息</span></span><br><span class="line">		geometry_msgs::Twist vel_msg;</span><br><span class="line">		vel_msg.linear.x = <span class="number">0.5</span>;</span><br><span class="line">		vel_msg.angular.z = <span class="number">0.2</span>;</span><br><span class="line"></span><br><span class="line">	    <span class="comment">// 发布消息</span></span><br><span class="line">		turtle_vel_pub.publish(vel_msg);</span><br><span class="line">		ROS_INFO(<span class="string">"Publsh turtle velocity command[%0.2f m/s, %0.2f rad/s]"</span>, </span><br><span class="line">				vel_msg.linear.x, vel_msg.angular.z);</span><br><span class="line"></span><br><span class="line">	    <span class="comment">// 按照循环频率延时</span></span><br><span class="line">	    loop_rate.sleep();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>完成cpp等代码文件后</p>
<blockquote>
<p>修改CmakeList.txt<br>add_executable(velocity_publisher src/velocity_publisher.cpp)<br>target_link_libraries(velocity_publisher ${catkin_LIBRARIES})  </p>
</blockquote>
<p>编译</p>
<blockquote>
<p>cd ~/ros21test_ws/<br>catkin_make<br>(可选)source devel/setup.bash</p>
</blockquote>
<p>运行</p>
<blockquote>
<p>roscore<br>rosrun turtlesim turtlesim_node<br>rosrun learning_topic velocity_publisher </p>
</blockquote>
<h3 id="2-5-Subsriber-Packages-发布功能包创建示例"><a href="#2-5-Subsriber-Packages-发布功能包创建示例" class="headerlink" title="2.5 Subsriber-Packages-发布功能包创建示例"></a>2.5 Subsriber-Packages-发布功能包创建示例</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ros/ros.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"turtlesim/Pose.h"</span> </span></span><br><span class="line"><span class="comment">// 接收到订阅的消息后，会进入消息回调函数  // 但是回调函数要高效短时</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">poseCallback</span><span class="params">(<span class="keyword">const</span> turtlesim::Pose::ConstPtr&amp; msg)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// 将接收到的消息在终端中打印出来</span></span><br><span class="line">    ROS_INFO(<span class="string">"Turtle pose: x:%0.6f, y:%0.6f"</span>, msg-&gt;x, msg-&gt;y);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> **argv)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// 初始化ROS节点</span></span><br><span class="line">    ros::init(argc, argv, <span class="string">"pose_subscriber"</span>);</span><br><span class="line">	</span><br><span class="line">    <span class="comment">// 创建节点句柄</span></span><br><span class="line">    ros::NodeHandle n;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 创建一个Subscriber,事实上是一个队列，订阅名为/turtle1/pose的topic，注册回调函数poseCallback 做反馈</span></span><br><span class="line">    ros::Subscriber pose_sub = n.subscribe(<span class="string">"/turtle1/pose"</span>, <span class="number">10</span>, poseCallback);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 循环等待回调函数  //查看pose_sub这个队列中是否有消息进来,如果有则调用回调函数并保持死循环</span></span><br><span class="line">    ros::spin();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="2-6-Topic-message-的自定义和使用"><a href="#2-6-Topic-message-的自定义和使用" class="headerlink" title="2.6 Topic message 的自定义和使用"></a>2.6 Topic message 的自定义和使用</h3><p>自定义创建msg文件</p>
<blockquote>
<p>mkdir msg  //在package(learning)目录下<br>touch Persion.msg  建立msg文件并输入自定义内容<br>string name<br>uint8 sex<br>uint8 age<br>uint8 unknown = 0<br>uint8 male = 1<br>uint8 female = 2 </p>
</blockquote>
<p>配置msg文件的编译规则</p>
<blockquote>
<ul>
<li>package.xml中添加功能包依赖<br><bulid_depend>message_generation</bulid_depend><exec_depend>message_runtime</exec_depend></li>
<li>cmake中添加编译选项<br>find_package(….message_generation)<br>catkin_package(…message_runtime…)<br>add_message_files(FILES Person.msg)<br>generate_messages(DEPENDENCIES std_msgs)</li>
</ul>
</blockquote>
<p>增加pub和sub的cpp脚本<br>配置编译规则并注意这里新增依赖</p>
<blockquote>
<p>add_executable(person_publisher src/person_publisher.cpp)<br>target_link_libraries(person_publisher ${catkin_LIBRARIES})<br>add_dependencies(person_publisher ${PROJECT_NAME}_generate_messages_cpp)  </p>
<p>add_executable(person_subscriber src/person_subscriber.cpp)<br>target_link_libraries(person_subscriber ${catkin_LIBRARIES})<br>add_dependencies(person_subscriber ${PROJECT_NAME}_generate_messages_cpp)</p>
</blockquote>
<p>tip: 如果是自定义数据形式msg或者srv, 则cpp的include头文件去devel中的include中找.</p>
<h3 id="2-7-Client-amp-Server-的使用-和-srv的自定义和使用"><a href="#2-7-Client-amp-Server-的使用-和-srv的自定义和使用" class="headerlink" title="2.7 Client &amp; Server 的使用 和 srv的自定义和使用"></a>2.7 Client &amp; Server 的使用 和 srv的自定义和使用</h3><p>看古月居视频</p>
<h3 id="2-8-Parameter-Server"><a href="#2-8-Parameter-Server" class="headerlink" title="2.8 Parameter Server"></a>2.8 Parameter Server</h3><h4 id="2-8-1-rosparam系列命令行"><a href="#2-8-1-rosparam系列命令行" class="headerlink" title="2.8.1 rosparam系列命令行"></a>2.8.1 rosparam系列命令行</h4><blockquote>
<p>rosparam list<br>rosparam get param_key<br>rosparam set param_key param_value<br>rosparam dump param.yaml  保存参数到文件<br>rosparam load  file_name<br>rosparam delete param_key<br>rosservice call /clear “{}”   //修改参数后更新显示 </p>
</blockquote>
<p>代码实现<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ros/ros.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;std_srvs/Empty.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> **argv)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> red, green, blue;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ROS节点初始化</span></span><br><span class="line">    ros::init(argc, argv, <span class="string">"parameter_config"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 创建节点句柄</span></span><br><span class="line">    ros::NodeHandle node;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 读取背景颜色参数</span></span><br><span class="line">        ros::param::<span class="built_in">get</span>(<span class="string">"/background_r"</span>, red);</span><br><span class="line">        ros::param::<span class="built_in">get</span>(<span class="string">"/background_g"</span>, green);</span><br><span class="line">        ros::param::<span class="built_in">get</span>(<span class="string">"/background_b"</span>, blue);</span><br><span class="line"></span><br><span class="line">        ROS_INFO(<span class="string">"Get Backgroud Color[%d, %d, %d]"</span>, red, green, blue);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 设置背景颜色参数</span></span><br><span class="line">        ros::param::<span class="built_in">set</span>(<span class="string">"/background_r"</span>, <span class="number">255</span>);</span><br><span class="line">        ros::param::<span class="built_in">set</span>(<span class="string">"/background_g"</span>, <span class="number">255</span>);</span><br><span class="line">        ros::param::<span class="built_in">set</span>(<span class="string">"/background_b"</span>, <span class="number">255</span>);</span><br><span class="line"></span><br><span class="line">        ROS_INFO(<span class="string">"Set Backgroud Color[255, 255, 255]"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 读取背景颜色参数</span></span><br><span class="line">        ros::param::<span class="built_in">get</span>(<span class="string">"/background_r"</span>, red);</span><br><span class="line">        ros::param::<span class="built_in">get</span>(<span class="string">"/background_g"</span>, green);</span><br><span class="line">        ros::param::<span class="built_in">get</span>(<span class="string">"/background_b"</span>, blue);</span><br><span class="line"></span><br><span class="line">        ROS_INFO(<span class="string">"Re-get Backgroud Color[%d, %d, %d]"</span>, red, green, blue);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 调用服务，刷新背景颜色</span></span><br><span class="line">        ros::service::waitForService(<span class="string">"/clear"</span>);</span><br><span class="line">        ros::ServiceClient clear_background = node.serviceClient&lt;std_srvs::Empty&gt;(<span class="string">"/clear"</span>);</span><br><span class="line">        std_srvs::Empty srv;</span><br><span class="line">        clear_background.call(srv);</span><br><span class="line"></span><br><span class="line">        sleep(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">~</span><br></pre></td></tr></table></figure></p>
<h4 id="2-8-2-动态参数设置-dynamic-reconfigure"><a href="#2-8-2-动态参数设置-dynamic-reconfigure" class="headerlink" title="2.8.2 动态参数设置 dynamic reconfigure"></a>2.8.2 动态参数设置 dynamic reconfigure</h4><p>资料：忘了直接看视频</p>
<ol>
<li>助教lab session <a href="https://web.microsoftstream.com/video/7e937b7a-15ac-4a3c-91fa-db16beedf7ef?referrer=http:%2F%2Fchrome.ws.dei.polimi.it%2Findex.php%3Ftitle%3DRobotics" target="_blank" rel="noopener">20200409</a></li>
<li><a href="https://www.guyuehome.com/1173" target="_blank" rel="noopener">古月居博客</a></li>
</ol>
<h3 id="2-9-Timer"><a href="#2-9-Timer" class="headerlink" title="2.9 Timer"></a>2.9 Timer</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"ros/ros.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"std_msgs/String.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;time.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">timerCallback</span><span class="params">(<span class="keyword">const</span> ros::TimerEvent&amp; ev)</span></span>&#123;</span><br><span class="line">	ROS_INFO_STREAM(<span class="string">"Callback called at time: "</span> &lt;&lt;  ros::Time::now());</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> **argv)</span></span>&#123;   </span><br><span class="line">	ros::init(argc, argv, <span class="string">"timed_talker"</span>);</span><br><span class="line">	ros::NodeHandle n;</span><br><span class="line"></span><br><span class="line">	ros::Timer timer = n.createTimer(ros::Duration(<span class="number">0.1</span>), timerCallback);  </span><br><span class="line">    <span class="comment">//每0.1秒调用一次回调函数</span></span><br><span class="line">	ros::spin();</span><br><span class="line">  	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>rosrun timer timed_pub<br>注意名字不一样是因为cmake中修改了<br>add_executable(<strong>timed_pub</strong> src/pub.cpp)<br>target_link_libraries(<strong>timed_pub</strong> ${catkin_LIBRARIES})</p>
</blockquote>
<h3 id="2-9-ROS-坐标系管理系统"><a href="#2-9-ROS-坐标系管理系统" class="headerlink" title="2.9 ROS 坐标系管理系统"></a>2.9 ROS 坐标系管理系统</h3><p>0415 lab session : TF  &amp; message filter</p>
<h4 id="2-9-1-TF-0415-助教版"><a href="#2-9-1-TF-0415-助教版" class="headerlink" title="2.9.1 TF(0415 助教版)"></a>2.9.1 TF(0415 助教版)</h4><p>主要使用TF(transform)功能包进行坐标变换.<br>记录十秒内机器人部件各自的坐标系关系,免于复杂的推演,对机器人各部位繁杂的坐标系系统进行管理和查询. 例如五秒钟之前机器人头部相对与全局坐标系所处的位置参数.  后台以TF-tree保存坐标系系统.</p>
<ul>
<li><p>turtle demo展示命令行:</p>
<blockquote>
<p>sudo apt-get install ros-melodic-turtle-tf<br>roslaunch turtle_tf turtle_tf_demo.launch<br>rosrun turtlesim turtle_teleop_key<br>rosrun tf view_frames</p>
</blockquote>
</li>
<li><p>课上cpp实现展示</p>
<blockquote>
<p>rosbag play -l robotics.bag<br>rostopic  echo  tf<br>rosrun rqt_tf_tree rqt_tf_tree<br>rosrun tf view_frames  //保存pdf</p>
</blockquote>
</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//cmakelist 需要增加tf 依赖包</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"ros/ros.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"turtlesim/Pose.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;tf/transform_broadcaster.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">tf_sub_pub</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">        tf_sub_pub()&#123;</span><br><span class="line">            sub = n.subscribe(<span class="string">"/turtle1/pose"</span>, <span class="number">1000</span>, &amp;tf_sub_pub::callback, <span class="keyword">this</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">callback</span><span class="params">(<span class="keyword">const</span> turtlesim::Pose::ConstPtr&amp; msg)</span></span>&#123;</span><br><span class="line">            tf::Transform transform;</span><br><span class="line">            transform.setOrigin( tf::Vector3(msg-&gt;x, msg-&gt;y, <span class="number">0</span>) );</span><br><span class="line">            tf::Quaternion q;</span><br><span class="line">            q.setRPY(<span class="number">0</span>, <span class="number">0</span>, msg-&gt;theta);</span><br><span class="line">            transform.setRotation(q);</span><br><span class="line">            br.sendTransform(tf::StampedTransform(transform, ros::Time::now(), <span class="string">"world"</span>, <span class="string">"turtle"</span>));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    ros::NodeHandle n;</span><br><span class="line">    tf::TransformBroadcaster br;  </span><br><span class="line">    ros::Subscriber sub;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//这个broadcaster就是一个publisher,而sendTransform的作用是来封装publish的函数。在实际的使用中，我们需要在某个Node中构建tf::TransformBroadcaster类，然后调用sendTransform(),将transform发布到/tf的一段transform上。</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> **argv)</span></span>&#123;</span><br><span class="line">     ros::init(argc, argv, <span class="string">"subscribe_and_publish"</span>);</span><br><span class="line">     tf_sub_pub my_tf_sub_bub;</span><br><span class="line">     ros::spin();</span><br><span class="line">     <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">cmake_minimum_required(VERSION <span class="number">2.8</span><span class="number">.3</span>)</span><br><span class="line">project(tf_examples)</span><br><span class="line">## Find catkin <span class="keyword">and</span> any catkin packages</span><br><span class="line">find_package(catkin REQUIRED COMPONENTS roscpp std_msgs tf)</span><br><span class="line">## Declare a catkin package</span><br><span class="line">catkin_package()</span><br><span class="line">## Build talker <span class="keyword">and</span> listener</span><br><span class="line">include_directories(include $&#123;catkin_INCLUDE_DIRS&#125;)</span><br><span class="line">add_executable(tf_pub src/pub.cpp)</span><br><span class="line">target_link_libraries(tf_pub $&#123;catkin_LIBRARIES&#125;)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>rosrun tf_examples  tf_pub<br>rivz</p>
</blockquote>
<ul>
<li>基于cpp代码的launch文件系统使用案例<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">launch</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">node</span> <span class="attr">pkg</span>=<span class="string">"tf_examples"</span> <span class="attr">type</span> = <span class="string">"tf_pub"</span> <span class="attr">name</span> = <span class="string">"tf_pub"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">node</span> <span class="attr">pkg</span>=<span class="string">"turtlesim"</span> <span class="attr">type</span> = <span class="string">"turtlesim_node"</span> <span class="attr">name</span> = <span class="string">"turtlesim_node"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">node</span> <span class="attr">pkg</span>=<span class="string">"turtlesim"</span> <span class="attr">type</span> = <span class="string">"turtle_teleop_key"</span> <span class="attr">name</span> = <span class="string">"turtle_teleop_key"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">node</span> <span class="attr">pkg</span>=<span class="string">"tf"</span> <span class="attr">type</span>=<span class="string">"static_transform_publisher"</span> <span class="attr">name</span>=<span class="string">"back_right"</span> <span class="attr">args</span>=<span class="string">"0.3 -0.3 0 0 0 0 1 turtle FRleg 100"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">node</span> <span class="attr">pkg</span>=<span class="string">"tf"</span> <span class="attr">type</span>=<span class="string">"static_transform_publisher"</span> <span class="attr">name</span>=<span class="string">"front_right"</span> <span class="attr">args</span>=<span class="string">"0.3 0.3 0 0 0 0 1 turtle FLleg 100"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">node</span> <span class="attr">pkg</span>=<span class="string">"tf"</span> <span class="attr">type</span>=<span class="string">"static_transform_publisher"</span> <span class="attr">name</span>=<span class="string">"front_left"</span> <span class="attr">args</span>=<span class="string">"-0.3 0.3 0 0 0 0 1 turtle BLleg 100"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">node</span> <span class="attr">pkg</span>=<span class="string">"tf"</span> <span class="attr">type</span>=<span class="string">"static_transform_publisher"</span> <span class="attr">name</span>=<span class="string">"back_left"</span> <span class="attr">args</span>=<span class="string">"-0.3 -0.3 0 0 0 0 1 turtle BRleg 100"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">launch</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>static_transform_publisher：在命令行工具中也有一个与transformcaster相类似的工具,它能够接受命令行参数来接受位置信息、旋转信息、父框架、子框   </p>
<node pkg="tf" type="static_transform_publisher" name="broadcaster" args="1 0 0 0 0 0 1 parent child 100">   

</blockquote>
</li>
</ul>
<blockquote>
<p>geometry_msgs/TransformStamped.msg ： <a href="https://sychaichangkun.gitbooks.io/ros-tutorial-icourse163/content/chapter8/8.2.html" target="_blank" rel="noopener">https://sychaichangkun.gitbooks.io/ros-tutorial-icourse163/content/chapter8/8.2.html</a><br>tf::StampedTransform: 只能用在C++里，只是C++的一个类，一种数据格式，并不是一个消息。而geometry_msgs/TransformStamped.msg是一个message,它依赖于ROS，与语言无关，也即是无论何种语言，C++、Python、Java等等，都可以发送该消息。来自  <a href="https://sychaichangkun.gitbooks.io/ros-tutorial-icourse163/content/chapter8/8.3.html" target="_blank" rel="noopener">https://sychaichangkun.gitbooks.io/ros-tutorial-icourse163/content/chapter8/8.3.html</a></p>
</blockquote>
<ul>
<li>注意0415关于rviz的演示部分<blockquote>
<p>rosbag play -l  robotics.bag<br>rviz   // 选择by topic 中的odometry 可视化向量变化轨迹 </p>
</blockquote>
</li>
</ul>
<h4 id="2-9-2-TF-古月居21讲版本"><a href="#2-9-2-TF-古月居21讲版本" class="headerlink" title="2.9.2 TF(古月居21讲版本)"></a>2.9.2 TF(古月居21讲版本)</h4><h3 id="2-10-Message-Filter"><a href="#2-10-Message-Filter" class="headerlink" title="2.10 Message Filter"></a>2.10 Message Filter</h3><p>ROS Lab Session（0416前半部分）</p>
<ul>
<li><p>message_filter是roscpp和rospy的一个应用库，他集中了一些滤波算法中常用的一些消息。当一个消息到来，在之后的一个时间点，该消息可能被返回或者不返回，将这样的一个过程或者容器理解为消息滤波器。</p>
<font color=red>一个典型的例子就是时间同步器(这里是检查，并不是调整消息的时间戳使其同步)，他从多个数据源采集不同类型的数据，只有每个消息源的消息具体有相同的时间戳时候，他才将信息发布出去。
时间同步装置的一个例子：输入不同类型（type）的多个数据（source），但是仅当接收到的每个数据（source）有相同的时间戳（timestamp），才会有输出（output）。</font>
</li>
<li><p>Example<br>pub:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"ros/ros.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"geometry_msgs/Vector3Stamped.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sstream&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> **argv)</span></span>&#123;</span><br><span class="line">	ros::init(argc, argv, <span class="string">"publisher"</span>);</span><br><span class="line">	ros::NodeHandle n;</span><br><span class="line">	ros::Publisher pub1 = n.advertise&lt;geometry_msgs::Vector3Stamped&gt;(<span class="string">"topic1"</span>, <span class="number">1000</span>);</span><br><span class="line">	ros::Publisher pub2 = n.advertise&lt;geometry_msgs::Vector3Stamped&gt;(<span class="string">"topic2"</span>, <span class="number">1000</span>);</span><br><span class="line">	<span class="comment">// Message fillter 只能建立在stamp的基础上，而stamp指的是header 中含有时间戳的数据类。</span></span><br><span class="line">	<span class="function">ros::Rate <span class="title">loop_rate</span><span class="params">(<span class="number">1</span>)</span></span>;</span><br><span class="line">	<span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">  	<span class="keyword">while</span> (ros::ok())&#123;</span><br><span class="line">		geometry_msgs::Vector3Stamped msg1;</span><br><span class="line">		geometry_msgs::Vector3Stamped msg2;</span><br><span class="line">		</span><br><span class="line">		msg1.header.stamp = ros::Time::now();</span><br><span class="line">		msg1.header.frame_id = <span class="string">"f1"</span>;</span><br><span class="line">		msg1.<span class="built_in">vector</span>.x = <span class="number">1</span>;</span><br><span class="line">		msg1.<span class="built_in">vector</span>.y = <span class="number">1</span>;</span><br><span class="line">		msg1.<span class="built_in">vector</span>.z = <span class="number">1</span>;</span><br><span class="line">		msg2.header.stamp = ros::Time::now();  <span class="comment">//这样定义时 msg1和msg2的时间戳是不一样的</span></span><br><span class="line">		msg2.header.frame_id = <span class="string">"f2"</span>;</span><br><span class="line">		msg2.<span class="built_in">vector</span>.x = <span class="number">2</span>;</span><br><span class="line">		msg2.<span class="built_in">vector</span>.y = <span class="number">2</span>;</span><br><span class="line">		msg2.<span class="built_in">vector</span>.z = <span class="number">2</span>;</span><br><span class="line">    		pub1.publish(msg1);</span><br><span class="line">    		pub2.publish(msg2);</span><br><span class="line">    		ROS_INFO (<span class="string">"Publishing message"</span>);</span><br><span class="line">    		ros::spinOnce();</span><br><span class="line">    		loop_rate.sleep();</span><br><span class="line">    		++count;</span><br><span class="line">  	&#125;</span><br><span class="line">  	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">```  </span><br><span class="line">sub-普通的时间同步器:</span><br><span class="line">```cpp</span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"ros/ros.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"geometry_msgs/Vector3Stamped.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;message_filters/subscriber.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;message_filters/time_synchronizer.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">callback</span><span class="params">(<span class="keyword">const</span> geometry_msgs::Vector3StampedConstPtr&amp; msg1, <span class="keyword">const</span> geometry_msgs::Vector3StampedConstPtr&amp; msg2)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  ROS_INFO (<span class="string">"Received two messages: (%f,%f,%f) and (%f,%f,%f)"</span>, msg1-&gt;<span class="built_in">vector</span>.x,msg1-&gt;<span class="built_in">vector</span>.y,msg1-&gt;<span class="built_in">vector</span>.z, msg2-&gt;<span class="built_in">vector</span>.x, msg2-&gt;<span class="built_in">vector</span>.y, msg2-&gt;<span class="built_in">vector</span>.z);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span>** argv)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  ros::init(argc, argv, <span class="string">"subscriber"</span>);</span><br><span class="line">  ros::NodeHandle n;</span><br><span class="line">  message_filters::Subscriber&lt;geometry_msgs::Vec【【【【】tor3Stamped&gt; sub1(n, "topic1", 1);</span><br><span class="line">  <span class="function">message_filters::Subscriber&lt;geometry_msgs::Vector3Stamped&gt; <span class="title">sub2</span><span class="params">(n, <span class="string">"topic2"</span>, <span class="number">1</span>)</span></span>;</span><br><span class="line">  message_filters::TimeSynchronizer&lt;geometry_msgs::Vector3Stamped, geometry_msgs::Vector3Stamped&gt; sync(sub1, sub2, 10);  // 时间戳同步</span><br><span class="line">  sync.registerCallback(boost::bind(&amp;callback, _1, _2));</span><br><span class="line">  ros::spin();</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>sub-approximate_time版本:<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"ros/ros.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"geometry_msgs/Vector3Stamped.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;message_filters/subscriber.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;message_filters/time_synchronizer.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;message_filters/sync_policies/exact_time.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;message_filters/sync_policies/approximate_time.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">callback</span><span class="params">(<span class="keyword">const</span> geometry_msgs::Vector3StampedConstPtr&amp; msg1, <span class="keyword">const</span> geometry_msgs::Vector3StampedConstPtr&amp; msg2)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  ROS_INFO (<span class="string">"Received two messages: (%f,%f,%f) and (%f,%f,%f)"</span>, msg1-&gt;<span class="built_in">vector</span>.x,msg1-&gt;<span class="built_in">vector</span>.y,msg1-&gt;<span class="built_in">vector</span>.z, msg2-&gt;<span class="built_in">vector</span>.x, msg2-&gt;<span class="built_in">vector</span>.y, msg2-&gt;<span class="built_in">vector</span>.z);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span>** argv)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  ros::init(argc, argv, <span class="string">"subscriber_sync"</span>);</span><br><span class="line">  ros::NodeHandle n;</span><br><span class="line">  <span class="function">message_filters::Subscriber&lt;geometry_msgs::Vector3Stamped&gt; <span class="title">sub1</span><span class="params">(n, <span class="string">"topic1"</span>, <span class="number">1</span>)</span></span>;</span><br><span class="line">  <span class="function">message_filters::Subscriber&lt;geometry_msgs::Vector3Stamped&gt; <span class="title">sub2</span><span class="params">(n, <span class="string">"topic2"</span>, <span class="number">1</span>)</span></span>;</span><br><span class="line">  <span class="comment">//typedef message_filters::sync_policies::ExactTime&lt;geometry_msgs::Vector3Stamped, geometry_msgs::Vector3Stamped&gt; MySyncPolicy;</span></span><br><span class="line">  <span class="keyword">typedef</span> message_filters::sync_policies::ApproximateTime&lt;geometry_msgs::Vector3Stamped, geometry_msgs::Vector3Stamped&gt; MySyncPolicy;</span><br><span class="line">  <span class="function">message_filters::Synchronizer&lt;MySyncPolicy&gt; <span class="title">sync</span><span class="params">(MySyncPolicy(<span class="number">10</span>), sub1, sub2)</span></span>;</span><br><span class="line">  sync.registerCallback(boost::bind(&amp;callback, _1, _2));</span><br><span class="line">  ros::spin();</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="2-11-Actionlib库-第1个project不需要"><a href="#2-11-Actionlib库-第1个project不需要" class="headerlink" title="2.11 Actionlib库(第1个project不需要))"></a>2.11 Actionlib库(第1个project不需要))</h3><h4 id="2-11-1-ROS-wiki"><a href="#2-11-1-ROS-wiki" class="headerlink" title="2.11.1 ROS wiki"></a>2.11.1 ROS wiki</h4><p>详见<a href="http://wiki.ros.org/actionlib" target="_blank" rel="noopener">http://wiki.ros.org/actionlib</a></p>
<blockquote>
<p>总结： 常用于反馈client向sever发送请求之后实时反馈goal的进度。<br>if the service takes a long time to execute, the user might want the ability to cancel the request during execution or get periodic feedback about how the request is progressing. The actionlib package provides tools to create servers that execute long-running goals that can be preempted. It also provides a client interface in order to send requests to the server.</p>
</blockquote>
<h4 id="2-11-2-ROS-Lab-Session（0415后半部分）"><a href="#2-11-2-ROS-Lab-Session（0415后半部分）" class="headerlink" title="2.11.2 ROS Lab Session（0415后半部分）"></a>2.11.2 ROS Lab Session（0415后半部分）</h4><h3 id="Appendix-值得学习的文章或网站"><a href="#Appendix-值得学习的文章或网站" class="headerlink" title="Appendix 值得学习的文章或网站"></a>Appendix 值得学习的文章或网站</h3><ol>
<li>古月居 ros 探索总结系列：<a href="https://www.guyuehome.com/category/column/ros-exploring/page/3" target="_blank" rel="noopener">https://www.guyuehome.com/category/column/ros-exploring/page/3</a></li>
<li>ROS中spin 的解释、nodeclass的案例以及结合MultiThreadedSpinner与AsyncSpinner的多线程ros编程：<a href="https://yuzhangbit.github.io/tools/several-ways-of-writing-a-ros-node/" target="_blank" rel="noopener">https://yuzhangbit.github.io/tools/several-ways-of-writing-a-ros-node/</a><br>3.[转]ROS中使用message_filters进行多传感器消息同步<a href="https://blog.csdn.net/weixin_33895516/article/details/93522384?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromBaidu-5&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromBaidu-5" target="_blank" rel="noopener">https://blog.csdn.net/weixin_33895516/article/details/93522384?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromBaidu-5&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromBaidu-5</a></li>
</ol>

            <hr>
          </div>
          <br>
          <div>
            <p>
            
              <span>
                <i class="iconfont icon-inbox"></i>
                
                  <a class="hover-with-bg" href="/categories/Robotics">Robotics</a>
                  &nbsp;
                
              </span>&nbsp;&nbsp;
            
            
              <span>
                <i class="iconfont icon-tag"></i>
                
                  <a class="hover-with-bg" href="/tags/Robotics">Robotics</a>
                
                  <a class="hover-with-bg" href="/tags/SLAM">SLAM</a>
                
                  <a class="hover-with-bg" href="/tags/ROS">ROS</a>
                
              </span>
            
            </p>
            
              <p class="note note-warning">本博客所有文章除特别声明外，均采用 <a href="https://zh.wikipedia.org/wiki/Wikipedia:CC_BY-SA_3.0%E5%8D%8F%E8%AE%AE%E6%96%87%E6%9C%AC" target="_blank" rel="nofollow noopener noopener">CC BY-SA 3.0协议</a> 。转载请注明出处！</p>
            
          </div>
        </div>
      </div>
    </div>
    <div class="d-none d-lg-block col-lg-2 toc-container">
      
  <div id="toc">
    <p class="h4"><i class="far fa-list-alt"></i>&nbsp;TOC</p>
    <div id="tocbot"></div>
  </div>

    </div>
  </div>
</div>

<!-- custom -->


<!-- Comments -->
<div class="col-lg-7 mx-auto nopadding-md">
  <div class="container comments mx-auto" id="comments">
    
  </div>
</div>

    
  </main>

  
    <a class="z-depth-1" id="scroll-top-button" href="#" role="button">
      <i class="fa fa-chevron-up scroll-top-arrow" aria-hidden="true"></i>
    </a>
  

  
    <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">Search</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">keyword</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
  

  <footer class="mt-5">
  <div class="text-center py-3">
    <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><b>Hexo</b></a>
    <i class="iconfont icon-love"></i>
    <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"> <b>Fluid</b></a>
    <br>

    


    


    <!-- cnzz Analytics icon -->
    

  </div>
</footer>

<!-- SCRIPTS -->
<script src="/lib/jquery/jquery.min.js" ></script>
<script src="/lib/popper/popper.min.js" ></script>
<script src="/lib/bootstrap/js/bootstrap.min.js" ></script>
<script src="/lib/mdbootstrap/js/mdb.min.js" ></script>
<script src="/js/main.js" ></script>


  <script src="/js/lazyload.js" ></script>



  
    <script src="/lib/tocbot/tocbot.min.js" ></script>
  
  <script src="/js/post.js" ></script>



  <script src="/lib/smoothscroll/SmoothScroll.min.js" ></script>



  <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>


<!-- Plugins -->


  

  

  

  

  <!-- cnzz Analytics -->
  



  <script src="/lib/prettify/prettify.min.js" ></script>
  <script>
    $(document).ready(function () {
      $('pre').addClass('prettyprint  linenums');
      prettyPrint();
    })
  </script>



  <script src="/lib/typed/typed.min.js" ></script>
  <script>
    var typed = new Typed('#subtitle', {
      strings: [
        '  ',
        "ROS Coding 202003-202006&nbsp;",
      ],
      cursorChar: "_",
      typeSpeed: 70,
      loop: false,
    });
    typed.stop();
    $(document).ready(function () {
      $(".typed-cursor").addClass("h2");
      typed.start();
    });
  </script>



  <script src="/lib/anchor/anchor.min.js" ></script>
  <script>
    anchors.options = {
      placement: "right",
      visible: "false",
      
    };
    var el = "h1,h2,h3,h4,h5,h6".split(",");
    var res = [];
    for (item of el) {
      res.push(".markdown-body > " + item)
    }
    anchors.add(res.join(", "))
  </script>



  <script src="/js/local-search.js" ></script>
  <script>
    var path = "/local-search.xml";
    var inputArea = document.querySelector("#local-search-input");
    inputArea.onclick = function () {
      getSearchFile(path);
      this.onclick = null
    }
  </script>



  <script src="/lib/fancybox/jquery.fancybox.min.js" ></script>
  <script>
    $("#post img:not(.no-zoom img, img[no-zoom])").each(
      function () {
        var element = document.createElement("a");
        $(element).attr("data-fancybox", "images");
        $(element).attr("href", $(this).attr("src"));
        $(this).wrap(element);
      }
    );
  </script>












<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script>
</body>
</html>
